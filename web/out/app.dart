// Auto-generated from index.html.
// DO NOT EDIT.

library depim;

import 'dart:html' as autogenerated;
import 'package:web_components/web_components.dart' as autogenerated;

import 'package:web_components/web_components.dart';

import 'dart:html';

import '../ui/ui.dart';

import 'components/click.html.dart';


// Original code
main() {}

void openHomeView(Event event) {
  switchMenu('#menu-home');
  var pathBinder = new PathBinder();
  var path = '';
  var html = '''
    <h1>Accueil</h1>
    <p>
      Path : <span id="path">${path}</span>
      <button class="msg">Add msg</button>
      <button class="msg-overlay">Add msg overlay</button>
    </p>
  ''';
  addMainBlocView(html);

  query('button.msg').on.click.add((e) {
    var now = new Date.now();
    var msg = new Message('success').show('''Welcome to Dart! ${now}''');
    //query('#path').text = pathBinder.getPath();
  });

  query('button.msg-overlay').on.click.add((e) {
    var now = new Date.now();
    var msg = new MessageOverlay('success').show('''<p>Welcome to Dart! ${now}</p><button>Un bouton</button>''');
  });

}

void openWareHouseView(Event event) {
  switchMenu('#menu-warehouse');
  var html = '''
    <div>
      <h1>Warehouse</h1>
    </div>
  ''';
  addMainBlocView(html);
}

void addMainBlocView(mainBlocHtml) {
  var mainBlocContainer = query("#main-bloc");

  if (mainBlocContainer is Element) mainBlocContainer.remove();

  var mainBlocContainerElemnt = new Element.html("""
      <section id="main-bloc">
        ${mainBlocHtml}
      </section>
    """);

  query("#main").nodes.add(mainBlocContainerElemnt);
}

void switchMenu(id) {
  queryAll('#menu .active').forEach((elem) {
    elem.attributes['class'] = '';
  });
  query(id).attributes['class'] = 'active';
}


// Additional generated code
/** Create the views and bind them to models. */
void init_autogenerated() {
  // Create view.
  var _root = new autogenerated.DocumentFragment.html(_INITIAL_PAGE);

  autogenerated.DivElement _app;
  
  autogenerated.Element _banner;
  
  autogenerated.HeadingElement _siteTitle;
  
  autogenerated.ImageElement _logo;
  
  autogenerated.DivElement _userInfos;
  
  autogenerated.SpanElement _topbarName;
  
  autogenerated.Element _menu;
  
  autogenerated.LIElement _menuHome;
  
  autogenerated.AnchorElement __e0;
  
  autogenerated.EventListener _listener__e0_click_1;
  
  autogenerated.LIElement _menuWarehouse;
  
  autogenerated.AnchorElement __e1;
  
  autogenerated.EventListener _listener__e1_click_2;
  
  autogenerated.LIElement _menuDoc;
  
  autogenerated.LIElement _menuActe;
  
  autogenerated.UListElement _breadcrumb;
  
  autogenerated.UnknownElement __e2;
  
  autogenerated.Element _main;
  
  autogenerated.DivElement _msgBloc;
  
  autogenerated.Element _copyright;
  
  autogenerated.SpanElement _appVersion;
  
  autogenerated.SpanElement _copyrightYear;
  
  autogenerated.DivElement _dialogOverlay;
  


  // Initialize fields.
  _app = _root.query('#app');
  _banner = _app.query('#banner');
  _siteTitle = _banner.query('#site-title');
  _logo = _siteTitle.query('#logo');
  _userInfos = _banner.query('#user-infos');
  _topbarName = _userInfos.query('#topbar-name');
  _menu = _app.query('#menu');
  _menuHome = _menu.query('#menu-home');
  __e0 = _menuHome.query('#__e-0');
  _menuWarehouse = _menu.query('#menu-warehouse');
  __e1 = _menuWarehouse.query('#__e-1');
  _menuDoc = _menu.query('#menu-doc');
  _menuActe = _menu.query('#menu-acte');
  _breadcrumb = _app.query('#breadcrumb');
  __e2 = _breadcrumb.query('#__e-2');
  var component__e2 = new CounterComponent.forElement(__e2);
  component__e2.created_autogenerated();
  component__e2.created();
  component__e2.composeChildren();
  _main = _app.query('#main');
  _msgBloc = _app.query('#msg-bloc');
  _copyright = _app.query('#copyright');
  _appVersion = _copyright.query('#app-version');
  _copyrightYear = _copyright.query('#copyright-year');
  _dialogOverlay = _app.query('#dialog-overlay');
  

  // Attach model to views.
  _listener__e0_click_1 = (__e) {
    openHomeView(__e);
    autogenerated.dispatch();
  };
  __e0.on.click.add(_listener__e0_click_1);
  
  _listener__e1_click_2 = (__e) {
    openWareHouseView(__e);
    autogenerated.dispatch();
  };
  __e1.on.click.add(_listener__e1_click_2);
  
  __e2.xtag.inserted();
  
  __e2.xtag.inserted_autogenerated();
  


  // Attach view to the document.
  autogenerated.document.body.nodes.add(_root);
  _root = autogenerated.document.body;
}

final String _INITIAL_PAGE = '''

    <div id="app">
			<header id="banner" role="banner">
		    <div class="navbar navbar-fixed-top">
		      <div class="navbar-inner">
						<h1 id="site-title" class="brand">
              <img id="logo" class="pull-left" src="img/depim.png" alt="Depim">
							Outils de dépouillement en ligne
						</h1>
		        <div id="user-infos" class="pull-right">
		          <img src="img/avatar.jpg" width="23" height="24">
              <span id="topbar-name">Jean-Pascal</span>
              <img src="img/icone_config.png" width="77" height="30">
            </div>
	        </div>
        </div>
      </header>

      <nav id="menu" role="navigation">
        <ul class="nav nav-tabs">
          <li id="menu-home" class="active">
            <a href="#" id="__e-0">
              <i class="icon-th"></i>
              Accueil
            </a>
          </li>
          <li id="menu-warehouse">
            <a href="#" id="__e-1">
              <i class="icon-home"></i>
              Dépôts
            </a>
          </li>
          <li id="menu-doc">
            <a href="#">
              <i class="icon-book"></i>
              Documents
            </a>
          </li>
          <li id="menu-acte">
            <a href="#">
              <i class="icon-file"></i>
              Actes

            </a>
          </li>
        </ul>
      </nav>

      <ul id="breadcrumb" class="breadcrumb">
        <li class="active">
          <a href="#">Home</a>
          <span class="divider">&gt;</span>
        </li>
        <li><x-click-counter id="__e-2"></x-click-counter></li>
      </ul>

			<article id="main" role="main"></article>

      <div id="msg-bloc"></div>

			<footer id="copyright" role="contentInfo">
        <div class="navbar navbar-fixed-bottom">
          <div class="navbar-inner">
						<ul class="nav">
			        <li><a>DPIM v<span id="app-version">0.1</span></a></li>
			        <li><a>©<span id="copyright-year">2012</span></a></li>
			        <li><a>Jean-Pascal Milcent</a></li>
			        <li><a href="http://www.depim.net/aide">Aide</a></li>
			        <li><a href="terms.html">Terms</a></li>
			        <li><a href="termsofuse.html">Terms of Use</a></li>
			      </ul>
		      </div>
	      </div>
	    </footer>

  		<div id="dialog-overlay"></div>
  	</div>

		
		<script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
	
''';
