// Auto-generated from index.html.
// DO NOT EDIT.

library depim;

import 'dart:html' as autogenerated_html;
import 'dart:web_audio' as autogenerated_audio;
import 'dart:svg' as autogenerated_svg;
import 'package:web_ui/web_ui.dart' as autogenerated;

import 'package:web_ui/web_ui.dart';

import 'package:web_ui/watcher.dart' as watchers;

import 'dart:html';

import 'views/home.dart';
import 'views/warehouse.dart';


// Original code
main() {}

void openHomeView(Event event) {
  switchMenu('#menu-home');
  switchView('x-home');
}

void openWareHouseView(Event event) {
  switchMenu('#menu-warehouse');
  switchView('x-warehouse');
}

void switchView(id) {
  query('#main-bloc').elements.forEach((elem) {
    elem.attributes['style'] = 'display:none';
  });
  query(id).attributes['style'] = '';
}

void switchMenu(id) {
  queryAll('#menu .active').forEach((elem) {
    elem.attributes['class'] = '';
  });
  query(id).attributes['class'] = 'active';
  changeBreadcrumb(id);
}

void changeBreadcrumb(id) {
  Map<String, String> entryPath = <String, String>{
    'Accueil': '#menu-home',
    'Dépots': '#menu-warehouse'
  };
  Map<String, List> breadcrumb = <String, List>{
    '#menu-home': ['Accueil'],
    '#menu-warehouse': ['Accueil', 'Dépots']
  };

  queryAll('#breadcrumb li').forEach((e) {
    e.remove();
  });
  var breadcrumbLength = breadcrumb[id].length;

  var breadcrumbHtml = new StringBuffer();
  for (var i = 0; i < breadcrumbLength; i++) {
    var entry = breadcrumb[id][i],
        position = i + 1,
        classCss = (position == breadcrumbLength) ? 'class="active"' : '',
        href = (entryPath[entry] != null) ? 'href="${entryPath[entry]}"' : '',
        divider = (position != breadcrumbLength) ? '<span class="divider">></span>' : '',
        html = '<li $classCss><a $href>$entry</a>$divider</li>';
    breadcrumbHtml.add(html);
    print('i:$i/position:$position/length:$breadcrumbLength/html:$html');
  }
  query('#breadcrumb').appendHtml(breadcrumbHtml.toString());
}

// Additional generated code
/** Create the views and bind them to models. */
void init_autogenerated() {
  var _root = autogenerated_html.document.body;
  autogenerated_html.DivElement __app;
  
  autogenerated_html.Element __banner;
  
  autogenerated_html.HeadingElement __siteTitle;
  
  autogenerated_html.ImageElement __logo;
  
  autogenerated_html.DivElement __userInfos;
  
  autogenerated_html.SpanElement __topbarName;
  
  autogenerated_html.Element __menu;
  
  autogenerated_html.LIElement __menuHome;
  
  autogenerated_html.AnchorElement __e0;
  
  autogenerated_html.EventListener __listener__e0_click_1;
  
  autogenerated_html.LIElement __menuWarehouse;
  
  autogenerated_html.AnchorElement __e1;
  
  autogenerated_html.EventListener __listener__e1_click_2;
  
  autogenerated_html.LIElement __menuDoc;
  
  autogenerated_html.LIElement __menuActe;
  
  autogenerated_html.DivElement __main;
  
  autogenerated_html.UListElement __breadcrumb;
  
  autogenerated_html.Element __mainBloc;
  
  autogenerated_html.UnknownElement __e2;
  
  autogenerated_html.UnknownElement __e3;
  
  autogenerated_html.Element __copyright;
  
  autogenerated_html.SpanElement __appVersion;
  
  autogenerated_html.SpanElement __copyrightYear;
  
  autogenerated_html.DivElement __msgBloc;
  
  autogenerated_html.DivElement __dialogOverlay;
  


  // Initialize fields.
  __app = _root.query('#app');
  __banner = __app.query('#banner');
  __siteTitle = __banner.query('#site-title');
  __logo = __siteTitle.query('#logo');
  __userInfos = __banner.query('#user-infos');
  __topbarName = __userInfos.query('#topbar-name');
  __menu = __app.query('#menu');
  __menuHome = __menu.query('#menu-home');
  __e0 = __menuHome.query('#__e-0');
  __menuWarehouse = __menu.query('#menu-warehouse');
  __e1 = __menuWarehouse.query('#__e-1');
  __menuDoc = __menu.query('#menu-doc');
  __menuActe = __menu.query('#menu-acte');
  __main = __app.query('#main');
  __breadcrumb = __main.query('#breadcrumb');
  __mainBloc = __main.query('#main-bloc');
  __e2 = __mainBloc.query('#__e-2');
  new Home.forElement(__e2)
  ..created_autogenerated()
  ..created()
  ..composeChildren();
  __e3 = __mainBloc.query('#__e-3');
  new Warehouse.forElement(__e3)
  ..created_autogenerated()
  ..created()
  ..composeChildren();
  __copyright = __app.query('#copyright');
  __appVersion = __copyright.query('#app-version');
  __copyrightYear = __copyright.query('#copyright-year');
  __msgBloc = __app.query('#msg-bloc');
  __dialogOverlay = __app.query('#dialog-overlay');
  

  // Attach model to views.
  __listener__e0_click_1 = ($event) {
    openHomeView($event);
    autogenerated.dispatch();
  };
  __e0.on.click.add(__listener__e0_click_1);
  
  __listener__e1_click_2 = ($event) {
    openWareHouseView($event);
    autogenerated.dispatch();
  };
  __e1.on.click.add(__listener__e1_click_2);
  
  __e2.xtag..inserted()
  
  ..inserted_autogenerated();
  
  __e3.xtag..inserted()
  
  ..inserted_autogenerated();
  

}
