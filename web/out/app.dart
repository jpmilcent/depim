// Auto-generated from index.html.
// DO NOT EDIT.

library depim;

import 'dart:html' as autogenerated;
import 'package:web_components/web_components.dart' as autogenerated;

import 'package:web_components/web_components.dart';

import 'package:web_components/watcher.dart' as watchers;

import 'dart:html';

import 'views/home.dart';
import 'views/warehouse.html.dart';
import 'components/click.html.dart';


// Original code
main() {}

void openHomeView(Event event) {
  switchMenu('#menu-home');
  switchView('x-home');
}

void openWareHouseView(Event event) {
  switchMenu('#menu-warehouse');
  switchView('x-warehouse');
}

void switchView(id) {
  query('#main-bloc').elements.forEach((elem) {
    elem.attributes['style'] = 'display:none';
  });
  query(id).attributes['style'] = '';
}

void switchMenu(id) {
  queryAll('#menu .active').forEach((elem) {
    elem.attributes['class'] = '';
  });
  query(id).attributes['class'] = 'active';
  changeBreadcrumb(id);
}

void changeBreadcrumb(id) {
  Map<String, String> entryPath = <String, String>{
    'Accueil': '#menu-home',
    'Dépots': '#menu-warehouse'
  };
  Map<String, List> breadcrumb = <String, List>{
    '#menu-home': ['Accueil'],
    '#menu-warehouse': ['Accueil', 'Dépots']
  };

  queryAll('#breadcrumb li').forEach((e) {
    e.remove();
  });
  var breadcrumbLength = breadcrumb[id].length;

  var breadcrumbHtml = new StringBuffer();
  for (var i = 0; i < breadcrumbLength; i++) {
    var entry = breadcrumb[id][i],
        position = i + 1,
        classCss = (position == breadcrumbLength) ? 'active' : '',
        href = (entryPath[entry] != null) ? 'href="${entryPath[entry]}"' : '',
        divider = (position != breadcrumbLength) ? '<span class="divider">></span>' : '',
        html = '<li class="$classCss"><a $href>$entry</a>$divider</li>';
    breadcrumbHtml.add(html);
    print('i:$i/position:$position/length:$breadcrumbLength/html:$html');
  }
  query('#breadcrumb').addHtml(breadcrumbHtml.toString());
}

// Additional generated code
/** Create the views and bind them to models. */
void init_autogenerated() {
  // Create view.
  var _root = new autogenerated.DocumentFragment.html(_INITIAL_PAGE);

  autogenerated.DivElement _app;
  
  autogenerated.Element _banner;
  
  autogenerated.HeadingElement _siteTitle;
  
  autogenerated.ImageElement _logo;
  
  autogenerated.DivElement _userInfos;
  
  autogenerated.SpanElement _topbarName;
  
  autogenerated.Element _menu;
  
  autogenerated.LIElement _menuHome;
  
  autogenerated.AnchorElement __e0;
  
  autogenerated.EventListener _listener__e0_click_1;
  
  autogenerated.LIElement _menuWarehouse;
  
  autogenerated.AnchorElement __e1;
  
  autogenerated.EventListener _listener__e1_click_2;
  
  autogenerated.LIElement _menuDoc;
  
  autogenerated.LIElement _menuActe;
  
  autogenerated.UListElement _breadcrumb;
  
  autogenerated.Element _main;
  
  autogenerated.Element _mainBloc;
  
  autogenerated.UnknownElement __e2;
  
  autogenerated.UnknownElement __e3;
  
  autogenerated.UnknownElement __e4;
  
  autogenerated.DivElement _msgBloc;
  
  autogenerated.Element _copyright;
  
  autogenerated.SpanElement _appVersion;
  
  autogenerated.SpanElement _copyrightYear;
  
  autogenerated.DivElement _dialogOverlay;
  


  // Initialize fields.
  _app = _root.query('#app');
  _banner = _app.query('#banner');
  _siteTitle = _banner.query('#site-title');
  _logo = _siteTitle.query('#logo');
  _userInfos = _banner.query('#user-infos');
  _topbarName = _userInfos.query('#topbar-name');
  _menu = _app.query('#menu');
  _menuHome = _menu.query('#menu-home');
  __e0 = _menuHome.query('#__e-0');
  _menuWarehouse = _menu.query('#menu-warehouse');
  __e1 = _menuWarehouse.query('#__e-1');
  _menuDoc = _menu.query('#menu-doc');
  _menuActe = _menu.query('#menu-acte');
  _breadcrumb = _app.query('#breadcrumb');
  _main = _app.query('#main');
  _mainBloc = _main.query('#main-bloc');
  __e2 = _mainBloc.query('#__e-2');
  var component__e2 = new Home.forElement(__e2);
  component__e2.created_autogenerated();
  component__e2.created();
  component__e2.composeChildren();
  __e3 = _mainBloc.query('#__e-3');
  var component__e3 = new Warehouse.forElement(__e3);
  component__e3.created_autogenerated();
  component__e3.created();
  component__e3.composeChildren();
  __e4 = _mainBloc.query('#__e-4');
  var component__e4 = new CounterComponent.forElement(__e4);
  component__e4.created_autogenerated();
  component__e4.created();
  component__e4.composeChildren();
  _msgBloc = _main.query('#msg-bloc');
  _copyright = _main.query('#copyright');
  _appVersion = _copyright.query('#app-version');
  _copyrightYear = _copyright.query('#copyright-year');
  _dialogOverlay = _main.query('#dialog-overlay');
  

  // Attach model to views.
  _listener__e0_click_1 = (__e) {
    openHomeView(__e);
    autogenerated.dispatch();
  };
  __e0.on.click.add(_listener__e0_click_1);
  
  _listener__e1_click_2 = (__e) {
    openWareHouseView(__e);
    autogenerated.dispatch();
  };
  __e1.on.click.add(_listener__e1_click_2);
  
  __e2.xtag.inserted();
  
  __e2.xtag.inserted_autogenerated();
  
  __e3.xtag.inserted();
  
  __e3.xtag.inserted_autogenerated();
  
  __e4.xtag.inserted();
  
  __e4.xtag.inserted_autogenerated();
  


  // Attach view to the document.
  autogenerated.document.body.nodes.add(_root);
  _root = autogenerated.document.body;
}

final String _INITIAL_PAGE = '''

    <div id="app">
			<header id="banner" role="banner">
		    <div class="navbar navbar-fixed-top">
		      <div class="navbar-inner">
						<h1 id="site-title" class="brand">
              <img id="logo" class="pull-left" src="img/depim.png" alt="Depim">
							Outils de dépouillement en ligne
						</h1>
		        <div id="user-infos" class="pull-right">
		          <img src="img/avatar.jpg" width="23" height="24">
              <span id="topbar-name">Jean-Pascal</span>
              <img src="img/icone_config.png" width="77" height="30">
            </div>
	        </div>
        </div>
      </header>

      <nav id="menu" role="navigation">
        <ul class="nav nav-tabs">
          <li id="menu-home" class="active">
            <a href="#" id="__e-0">
              <i class="icon-th"></i>
              Accueil
            </a>
          </li>
          <li id="menu-warehouse">
            <a href="#" id="__e-1">
              <i class="icon-home"></i>
              Dépôts
            </a>
          </li>
          <li id="menu-doc">
            <a href="#">
              <i class="icon-book"></i>
              Documents
            </a>
          </li>
          <li id="menu-acte">
            <a href="#">
              <i class="icon-file"></i>
              Actes
            </a>
          </li>
        </ul>
      </nav>

      <ul id="breadcrumb" class="breadcrumb">
        <li class="active">
          <a href="#">Home</a>
          <span class="divider">&gt;</span>
        </li>
      </ul>

			<article id="main" role="main">
			  <section id="main-bloc">
          <x-home id="__e-2"></x-home>
          <x-warehouse style="display:none" id="__e-3"></x-warehouse>
          <x-click-counter id="__e-4">
        </x-click-counter></section>

      <div id="msg-bloc"></div>

			<footer id="copyright" role="contentInfo">
        <div class="navbar navbar-fixed-bottom">
          <div class="navbar-inner">
						<ul class="nav">
			        <li><a>DPIM v<span id="app-version">0.1</span></a></li>
			        <li><a>©<span id="copyright-year">2012</span></a></li>
			        <li><a>Jean-Pascal Milcent</a></li>
			        <li><a href="http://www.depim.net/aide">Aide</a></li>
			        <li><a href="terms.html">Terms</a></li>
			        <li><a href="termsofuse.html">Terms of Use</a></li>
			      </ul>
		      </div>
	      </div>
	    </footer>

  		<div id="dialog-overlay"></div>
  	</article></div>

		
		<script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
	
''';
