// Auto-generated from warehouse.html.
// DO NOT EDIT.

library x_warehouse;

import 'dart:html' as autogenerated;
import 'package:web_components/web_components.dart' as autogenerated;

import 'package:web_components/web_components.dart';

import 'dart:html';

import 'dart:json';

import 'dart:uri';

import '../../ui/ui.dart';

class Warehouse extends WebComponent {
  
  /** Autogenerated from the template. */
  
  /**
  * Shadow root for this component. We use 'var' to allow simulating shadow DOM
  * on browsers that don't support this feature.
  */
  var _root;
  autogenerated.FormElement _editWh;
  
  autogenerated.FieldSetElement _nameZoneWh;
  
  autogenerated.InputElement _whName;
  
  autogenerated.InputElement _whType;
  
  autogenerated.DataListElement _whTypeList;
  
  autogenerated.SelectElement _whTypeStd;
  
  autogenerated.InputElement _whCode;
  
  autogenerated.FieldSetElement _adresseZoneWh;
  
  autogenerated.InputElement _whAdresse;
  
  autogenerated.InputElement _whAdresseComplement;
  
  autogenerated.InputElement _whCodePostal;
  
  autogenerated.InputElement _whVille;
  
  autogenerated.FieldSetElement _contactZoneWh;
  
  autogenerated.InputElement _whCourriel;
  
  autogenerated.InputElement _whUrl;
  
  autogenerated.InputElement _whTelephoneFixe;
  
  autogenerated.InputElement _whTelephoneFax;
  
  autogenerated.FieldSetElement _noteZoneWh;
  
  autogenerated.InputElement _whUrlGeneawiki;
  
  autogenerated.TextAreaElement _whNote;
  
  autogenerated.ButtonElement __e0;
  
  autogenerated.EventListener _listener__e0_click_1;
  
  Warehouse.forElement(e) : super.forElement(e);
  
  void created_autogenerated() {
    _root = createShadowRoot();
    
    _root.innerHTML = '''
    
    <h1>Dépots</h1>
    
    <form id="edit-wh" class="form-horizontal" autocomplete="on">
    <div class="form-edit">
    <fieldset id="name-zone-wh">
    <legend>Nom et code</legend>
    <div class="control-group">
    <label class="control-label" for="wh-name">Nom</label>
    <div class="controls">
    <input id="wh-name" name="nom" type="text" required="" value="">
    </div>
    </div>
    
    <div class="control-group">
    <label class="control-label" for="wh-type">Type</label>
    <div class="controls">
    <input id="wh-type" name="type" type="text" list="wh-type-list" value="">
    <datalist id="wh-type-list">
    <label for="wh-type-std" title="Choisir une valeur standard">ou</label>
    <select id="wh-type-std" name="type">
    <option value="archive">Archive</option>
    <option value="bibliothèque">Bibliothèque</option>
    <option value="cimetière">Cimetière</option>
    <option value="mairie">Mairie</option>
    </select>
    </datalist>
    </div>
    </div>
    
    <div class="control-group">
    <label class="control-label" for="wh-code">Code</label>
    <div class="controls">
    <input id="wh-code" name="code" type="text" value="">
    </div>
    </div>
    </fieldset>
    
    <fieldset id="adresse-zone-wh">
    <legend>Adresse</legend>
    <div class="control-group">
    <label class="control-label" for="wh-adresse">Adresse</label>
    <div class="controls">
    <input id="wh-adresse" name="adresse" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-adresse-complement">Complément</label>
    <div class="controls">
    <input id="wh-adresse-complement" name="adresse-complement" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-code-postal">Code postal</label>
    <div class="controls">
    <input id="wh-code-postal" name="code_postal" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-ville">Ville</label>
    <div class="controls">
    <input id="wh-ville" name="ville" type="text" value="">
    </div>
    </div>
    </fieldset>
    
    <fieldset id="contact-zone-wh">
    <legend>Contact</legend>
    <div class="control-group">
    <label class="control-label" for="wh-courriel">Courriel</label>
    <div class="controls">
    <input id="wh-courriel" name="courriel" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-url">Url du site web</label>
    <div class="controls">
    <input id="wh-url" name="url" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-telephone-fixe">
    <abbr title="Téléphone fixe">Tél.</abbr>
    </label>
    <div class="controls">
    <input id="wh-telephone-fixe" name="telephone:fixe" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-telephone-fax">Fax</label>
    <div class="controls">
    <input id="wh-telephone-fax" name="telephone:fax" type="text" value="">
    </div>
    </div>
    </fieldset>
    
    <fieldset id="note-zone-wh">
    <legend>Notes et infos compélementaires</legend>
    <div class="control-group">
    <label class="control-label" for="wh-url-geneawiki">Url Geneawiki</label>
    <div class="controls">
    <input id="wh-url-geneawiki" name="url:geneawiki" type="text" value="">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="wh-note">Note</label>
    <div class="controls">
    <textarea id="wh-note" name="note"></textarea>
    </div>
    </div>
    </fieldset>
    </div>
    
    <div class="form-actions">
    <button type="submit" class="btn btn-primary pull-right" id="__e-0">
    Ajouter
    </button>
    <button type="button" class="btn">Annuler</button>
    </div>
    </form>
    <script type="application/dart"></script>
    <script src="https://dart.googlecode.com/svn/branches/bleeding_edge/dart/client/dart.js"></script>
    ''';
    _editWh = _root.query('#edit-wh');
    _nameZoneWh = _editWh.query('#name-zone-wh');
    _whName = _nameZoneWh.query('#wh-name');
    _whType = _nameZoneWh.query('#wh-type');
    _whTypeList = _nameZoneWh.query('#wh-type-list');
    _whTypeStd = _whTypeList.query('#wh-type-std');
    _whCode = _nameZoneWh.query('#wh-code');
    _adresseZoneWh = _editWh.query('#adresse-zone-wh');
    _whAdresse = _adresseZoneWh.query('#wh-adresse');
    _whAdresseComplement = _adresseZoneWh.query('#wh-adresse-complement');
    _whCodePostal = _adresseZoneWh.query('#wh-code-postal');
    _whVille = _adresseZoneWh.query('#wh-ville');
    _contactZoneWh = _editWh.query('#contact-zone-wh');
    _whCourriel = _contactZoneWh.query('#wh-courriel');
    _whUrl = _contactZoneWh.query('#wh-url');
    _whTelephoneFixe = _contactZoneWh.query('#wh-telephone-fixe');
    _whTelephoneFax = _contactZoneWh.query('#wh-telephone-fax');
    _noteZoneWh = _editWh.query('#note-zone-wh');
    _whUrlGeneawiki = _noteZoneWh.query('#wh-url-geneawiki');
    _whNote = _noteZoneWh.query('#wh-note');
    __e0 = _editWh.query('#__e-0');
    
  }
  
  void inserted_autogenerated() {
    _listener__e0_click_1 = (__e) {
      addWarehouse(__e);
      autogenerated.dispatch();
    };
    __e0.on.click.add(_listener__e0_click_1);
    
  }
  
  void removed_autogenerated() {
    _root = null;
    
    _editWh = null;
    
    _nameZoneWh = null;
    
    _whName = null;
    
    _whType = null;
    
    _whTypeList = null;
    
    _whTypeStd = null;
    
    _whCode = null;
    
    _adresseZoneWh = null;
    
    _whAdresse = null;
    
    _whAdresseComplement = null;
    
    _whCodePostal = null;
    
    _whVille = null;
    
    _contactZoneWh = null;
    
    _whCourriel = null;
    
    _whUrl = null;
    
    _whTelephoneFixe = null;
    
    _whTelephoneFax = null;
    
    _noteZoneWh = null;
    
    _whUrlGeneawiki = null;
    
    _whNote = null;
    
    __e0.on.click.remove(_listener__e0_click_1);
    _listener__e0_click_1 = null;
    
    __e0 = null;
    
  }
  
  /** Original code from the component. */
  
  void addWarehouse(e) {
    var dataUrl = 'http://localhost/dart/depim/server/services/0.1/structure',
    nom = query('input[name="nom"]').value,
    type = query('input[name="type"]').value,
    code = query('input[name="code"]').value,
    meta = {
      'utilisateurId' : 1,
      'tags' : {
        'etat' : 'A',
        'type' : 'structure',
        'commentaire' : 'Ajout d\'une structure.',
        'source' : 'http://fr.geneawiki.com/index.php/Archives_d%C3%A9partementales_de_l%27H%C3%A9rault'
      }
    },
    tags = {
      'nom': nom,
      'type': type,
      'code': code
    },
    data = {'meta' : meta, 'tags': tags},
    encodedData = JSON.stringify(data);
    
    var httpRequest = new HttpRequest();
    httpRequest.open('POST', dataUrl);
    httpRequest.setRequestHeader('Content-type', 'application/json');
    httpRequest.on.loadEnd.add((e) => loadEnd(httpRequest));
    print(encodedData);
    httpRequest.send(encodedData);
  }
  
  void loadEnd(HttpRequest request) {
    if (request.status != 200) {
      new Message('success').show('Uh oh, there was an error of ${request.status}');
      return;
    } else {
      new Message('success').show('Data has been posted. ${request.responseText}');
    }
  }
}

