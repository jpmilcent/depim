<!DOCTYPE html>
<meta charset="utf-8">
<link rel="import" href="../lib/components/menu-list.html">
<link rel="import" href="../lib/components/message.html">
<link rel="import" href="../lib/components/datalist_autocomplete.html">

<polymer-element name="doc-panel">
  <template>
    <div class="app-row">
      <div id="list-bloc">
        <menu-list id="doc-menu-list" title="Documents" elements="{{docList}}" on-selectmenu="{{onSelectedDoc}}"></menu-list>
      </div>
      <div id="edit-bloc">
        <form id="edit-doc" class="form-horizontal" autocomplete="on">
          <div class="form-edit app-column">
            <div class="app-row">
              <fieldset id="zone-doc">
                <legend>Infos</legend>
                
                <div class="control-group label-small">
                  <label class="control-label" for="doc-titre">Structure</label>
                  <div class="controls">
                    	<datalist-autocomplete class="field" name="guid:structure" 
                    		choices="http://localhost/dart/depim/server/services/v1/structures?tag=nom&q=%q"
                    		value="{{document.tags['guid:structure']}}"></datalist-autocomplete>
                  </div>
                </div>                
                
                <div class="control-group label-small">
                  <label class="control-label" for="doc-titre">Titre</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on"><i class="icon-home"></i></span>
                      <input id="doc-titre" class="field input-xlarge" name="titre" type="text" required 
                      	value="{{document.tags['titre']}}"/>
                    </div>
                  </div>
                </div>

                <div class="control-group label-small">
                  <label class="control-label" for="doc-titre">Abréviation</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <input id="doc-abreviation" class="field" name="abreviation" type="text" required 
                      	value="{{document.tags['abreviation']}}"/>
                    </div>
                  </div>
                </div>

                <div class="control-group label-small">
                  <label class="control-label" for="doc-support">Support</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on"><i class="icon-tag"></i></span>
                      <datalist-autocomplete class="field input-medium" name="support" 
                      	choices="registre,micro-film,micro-fiche,numérique"
                      	value="{{document.tags['support']}}"></datalist-autocomplete>
                    </div>
                  </div>
                </div>

                 <div class="control-group label-small">
                  <label class="control-label" for="doc-code">Code</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on"><i class="icon-barcode"></i></span>
                      <input id="doc-code" class="field input-small" name="code" type="text" 
                      	value="{{document.tags['code']}}"/>
                    </div>
                  </div>
                </div>
              </fieldset>

              <fieldset id="place-zone-doc">
                <legend>Lieu et date </legend>
                <div class="control-group label-large">
                  <label class="control-label" for="doc-lieu">Lieu</label>
                  <div class="controls">
                   <input id="doc-lieu" class="field has-tooltip" name="lieu" type="text" 
                   	title="Nom du lieu couvert par le document tel que mentionné dans le document." 
                   	value="{{document.tags['lieu']}}"/>
                  </div>
                </div>
                <div class="control-group label-large">
                  <label class="control-label" for="doc-commune">Commune</label>
                  <div class="controls">
                   <input id="doc-commune" class="field" name="commune" type="text" 
                   	value="{{document.tags['commune']}}"/>
                  </div>
                </div>
                <div class="control-group label-large">
                  <label class="control-label" for="doc-code-insee">Code INSEE</label>
                  <div class="controls">
                   <input id="doc-code-insee" class="field input-small" name="code:insee" type="text"
                   	value="{{document.tags['code:insee']}}"/>
                  </div>
                </div>

                <div class="control-group label-large">
                  <label class="control-label" for="doc-date-debut">Date</label>
                  <div class="controls">
                    <div class="form-inline">
                      <input id="doc-date-debut" class="field input-small" name="date:debut" type="date" placeholder="jj/mm/aaaa"
                      	value="{{document.tags['date:debut']}}"/>
                      à
                      <input id="doc-date-fin" class="field input-small" name="date:fin" type="date" placeholder="jj/mm/aaaa"
                      	value="{{document.tags['date:fin']}}"/>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>

            <div class="app-row">

              <fieldset id="source-zone-doc">
                <legend>Source et note</legend>
                <div class="control-group label-large">
                  <label class="control-label" for="doc-url-source">Url source</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on">@</span>
                      <input id="doc-url-source" class="field span4" name="url:source" type="url" 
                      	value="{{document.tags['url:source']}}"/>
                    </div>
                  </div>
                </div>

                <div class="control-group label-large">
                  <label class="control-label" for="wh-note">Note</label>
                  <div class="controls">
                    <div class="input-prepend">
                      <span class="add-on"><i class="icon-comment"></i></span>
                      <textarea id="wh-note" class="field span4" name="note" 
                      	value="{{document.tags['note']}}"></textarea>
                    </div>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>

          <div class="form-actions">
            <input id="doc-id" class="field" name="id" type="hidden" />

            <button type="submit" class="btn btn-success pull-right hide update-doc-cmd"
              on-click="{{updateDoc}}">
                Modifier
            </button>
            <button type="submit" class="btn btn-primary pull-right add-doc-cmd"
              on-click="{{addDoc}}">
                Ajouter
            </button>

            <button type="button" class="btn btn-danger hide delete-doc-cmd"
              on-click="{{deleteDoc}}">
                Supprimer
            </button>
            <button type="reset" class="btn reset-doc-cmd"
              on-click="{{resetDoc}}">
                Vider
            </button>
          </div>
        </form>
      </div>
    </div>
  </template>
  <script type="application/dart" src="doc.dart"></script>
</polymer-element>